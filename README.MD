#  Back-Tablero - DocumentaciÃ³n Completa

## DescripciÃ³n General
**Back-Tablero** es una aplicaciÃ³n **backend** desarrollada con **.NET 8 Web API** que gestiona un sistema de **tablero deportivo digital en tiempo real**.  

### Funcionalidades principales
- AutenticaciÃ³n y autorizaciÃ³n con roles y permisos.
- GestiÃ³n de usuarios y perfiles.
- AdministraciÃ³n de equipos y jugadores.
- CreaciÃ³n y seguimiento de partidos.
- Registro de cuartos de juego.
- Tablero de puntuaciÃ³n en tiempo real.
- OrquestaciÃ³n de servicios con **Docker Compose**.
- Persistencia de datos con **SQL Server** + **Entity Framework Core**.

---

##  Estructura del Proyecto

```plaintext
Back-Tablero-main/
â”‚â”€â”€ .gitignore
â”‚â”€â”€ README.MD
â”‚â”€â”€ docker-compose.yml
â”‚â”€â”€ tablero_api.sln
â”‚
â”œâ”€â”€ tablero_api/
â”‚   â”œâ”€â”€ .dockerignore
â”‚   â”œâ”€â”€ Docker-compose.yml
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”œâ”€â”€ Dockerfile.migrate
â”‚   â”œâ”€â”€ tablero_api.csproj
â”‚   â”œâ”€â”€ Program.cs
â”‚   â”œâ”€â”€ appsettings.json
â”‚   â”œâ”€â”€ appsettings.Development.json
â”‚   â”‚
â”‚   â”œâ”€â”€ Controllers/   # Controladores API
â”‚   â”‚   â”œâ”€â”€ AuthController.cs
â”‚   â”‚   â”œâ”€â”€ UsuarioController.cs
â”‚   â”‚   â”œâ”€â”€ RolController.cs
â”‚   â”‚   â”œâ”€â”€ PermisoController.cs
â”‚   â”‚   â”œâ”€â”€ EquipoController.cs
â”‚   â”‚   â”œâ”€â”€ JugadorController.cs
â”‚   â”‚   â”œâ”€â”€ PartidoController.cs
â”‚   â”‚   â”œâ”€â”€ CuartoController.cs
â”‚   â”‚   â”œâ”€â”€ TableroController.cs
â”‚   â”‚   â”œâ”€â”€ LocalidadController.cs
â”‚   â”‚   â””â”€â”€ ImagenController.cs
â”‚   â”‚
â”‚   â”œâ”€â”€ Data/
â”‚   â”‚   â””â”€â”€ AppDbContext.cs
â”‚   â”‚
â”‚   â”œâ”€â”€ Migrations/
â”‚   â”‚   â”œâ”€â”€ 20250824075611_initialCreate.*
â”‚   â”‚   â”œâ”€â”€ 20250914053154_authmigrate.*
â”‚   â”‚   â””â”€â”€ 20250914070710_jugadormigration.*
â”‚   â”‚
â”‚   â””â”€â”€ Properties/
```

---

## Requisitos Previos

Antes de ejecutar el proyecto asegÃºrate de tener instalado:

- [.NET 8 SDK](https://dotnet.microsoft.com/en-us/download/dotnet/8.0)
- [SQL Server 2022](https://www.microsoft.com/es-es/sql-server/sql-server-downloads)
- [Docker Desktop](https://www.docker.com/products/docker-desktop/)
- [Git](https://git-scm.com/)

---

##  InstalaciÃ³n y EjecuciÃ³n

###  Clonar repositorio
```bash
git clone <url-repo>
cd Back-Tablero-main
```

### Ejecutar con Docker
```bash
docker compose up --build
```

Esto levanta:
- **Backend API (ASP.NET Core 8)**
- **Base de datos SQL Server 2022**

### Ejecutar en local (sin Docker)
```bash
cd tablero_api
dotnet run
```

La API estarÃ¡ disponible en:  
[https://localhost:5001](https://localhost:5001)   [http://localhost:5000](http://localhost:5000)

### ğŸ”¹ Aplicar migraciones
```bash
dotnet ef database update
```

---

## Base de Datos

### Entidades principales
- **Usuario**: credenciales, roles, permisos.
- **Rol**: define niveles de acceso.
- **Permiso**: acciones autorizadas.
- **Equipo**: informaciÃ³n de equipos deportivos.
- **Jugador**: datos de jugadores.
- **Partido**: encuentros entre equipos.
- **Cuarto**: periodos de juego.
- **Localidad**: zonas fÃ­sicas (ej. estadios).
- **Tablero**: marcador en vivo.

### Diagrama Entidad-RelaciÃ³n (simplificado)
```mermaid
erDiagram
    Usuario ||--o{ Rol : pertenece
    Rol ||--o{ Permiso : asigna
    Equipo ||--o{ Jugador : incluye
    Partido ||--o{ Equipo : enfrenta
    Partido ||--o{ Cuarto : contiene
    Tablero ||--|| Partido : representa
    Localidad ||--o{ Partido : aloja
```

---

##  API Endpoints

### AutenticaciÃ³n
**Ruta base**: `/api/Auth`

| MÃ©todo | Endpoint    | DescripciÃ³n      |
|--------|-------------|-----------------|
| POST   | `/login`    | Iniciar sesiÃ³n  |
| POST   | `/register` | Registrar usuario |

 **Ejemplo Request Login**
```json
{
  "email": "admin@tablero.com",
  "password": "123456"
}
```

 **Ejemplo Response**
```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR...",
  "usuario": {
    "id": 1,
    "nombre": "Administrador",
    "rol": "Admin"
  }
}
```

---

###  Usuarios
**Ruta base**: `/api/Usuario`

| MÃ©todo | Endpoint   | DescripciÃ³n        |
|--------|------------|-------------------|
| GET    | `/`        | Listar usuarios   |
| GET    | `/{id}`    | Obtener usuario   |
| POST   | `/`        | Crear usuario     |
| PUT    | `/{id}`    | Actualizar usuario |
| DELETE | `/{id}`    | Eliminar usuario  |

---

###  Equipos y Jugadores
**Ruta base**: `/api/Equipo` y `/api/Jugador`

| MÃ©todo | Endpoint        | DescripciÃ³n       |
|--------|-----------------|------------------|
| GET    | `/api/Equipo`   | Listar equipos   |
| POST   | `/api/Equipo`   | Crear equipo     |
| GET    | `/api/Jugador`  | Listar jugadores |
| POST   | `/api/Jugador`  | Agregar jugador  |

---

### ğŸŸï¸ Partidos y Tablero
**Ruta base**: `/api/Partido` y `/api/Tablero`

| MÃ©todo | Endpoint        | DescripciÃ³n        |
|--------|-----------------|-------------------|
| GET    | `/api/Partido`  | Listar partidos   |
| POST   | `/api/Partido`  | Crear partido     |
| GET    | `/api/Tablero`  | Estado del tablero |

---

###  Roles y Permisos
**Ruta base**: `/api/Rol` y `/api/Permiso`

| MÃ©todo | Endpoint          | DescripciÃ³n      |
|--------|-------------------|-----------------|
| GET    | `/api/Rol`        | Listar roles    |
| POST   | `/api/Rol`        | Crear rol       |
| GET    | `/api/Permiso`    | Listar permisos |
| POST   | `/api/Permiso`    | Crear permiso   |

---

## ğŸ› ï¸ Desarrollo

### Crear nueva migraciÃ³n
```bash
dotnet ef migrations add NombreMigracion
```

### Aplicar migraciÃ³n
```bash
dotnet ef database update
```

### Ejecutar pruebas (cuando se integren con xUnit)
```bash
dotnet test
```

---

##  PrÃ³ximos pasos

-  IntegraciÃ³n con **Angular Frontend**  
-  ImplementaciÃ³n de pruebas unitarias y de integraciÃ³n  
-  ConfiguraciÃ³n de despliegue en **IIS / Azure / Docker Swarm**  
-  DocumentaciÃ³n con **Swagger** para explorar la API  

---

##  Autores
Proyecto desarrollado en la **Universidad Mariano GÃ¡lvez - IngenierÃ­a en Sistemas**  
Equipo: *Tablero Deportivo*
